<UserControl x:Class="ShelfMarket.UI.Views.UserControls.ShelfView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:views="clr-namespace:ShelfMarket.UI.Views" 
             xmlns:viewmodels="clr-namespace:ShelfMarket.UI.ViewModels" 
             xmlns:components="clr-namespace:ShelfMarket.UI.Views.UserControls.Components"
             d:DataContext="{d:DesignInstance Type=viewmodels:ShelfViewModel}"
             mc:Ignorable="d" Height="949" Width="1280">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" MinHeight="69.96"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <Border Style="{StaticResource Card}" Margin="0,0,0,4">
            <Grid>
                <!-- Kolonne definitioner for kontrol panel layout -->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Spacer -->
                    <ColumnDefinition Width="280"/>
                    <!-- MonthYearPicker - endnu mere plads for hele + knappen -->
                    <ColumnDefinition Width="30"/>
                    <!-- Spacer -->
                    <ColumnDefinition Width="150"/>
                    <!-- Tilføj knap -->                    
                    <ColumnDefinition Width="20"/>
                    <!-- Spacer-->
                    <ColumnDefinition Width="150"/>
                    <!-- Tilføj knap -->
                    <ColumnDefinition Width="Auto"/>
                    
                    <!-- Spacer -->
                    <ColumnDefinition Width="*"/>
                    <!-- Fyld resten -->
                </Grid.ColumnDefinitions>

                <!-- MonthYearPicker component - Flexible version allows going back in time -->
                <components:MonthYearPicker Grid.Column="1" 
                                            VerticalAlignment="Center"
                                            IsFlexible="True"
                                            SelectedDate="{Binding SelectedDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                <!-- Spacer mellem MonthYearPicker og knap -->
                <Border Grid.Column="2"/>

                <!-- Tilføj ny reol knap - Åbner popup vindue -->
                <Button Grid.Column="3" 
                        Content="Tilføj ny reol" 
                        Style="{StaticResource Button.Primary}" 
                        Click="TilfoejNyReol_Click" />

                <!-- Ny kontrakt - Åbner kontrakt popup -->
                <Button Grid.Column="5" 
                        Content="Ny Kontrakt" 
                        Style="{StaticResource Button.Primary}"
                        Click="NyKontrakt_Click"/> 
            </Grid>
        </Border>
        <!-- ===== REOL VISUALISERING ===== -->
        <!-- Reol visualiserings område med grid layout og drag and drop -->
        <Border Grid.Row="1" 
                Background="Transparent" 
                BorderBrush="{x:Null}" 
                BorderThickness="0" 
                CornerRadius="0" 
                Margin="8,4,8,8">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Grid x:Name="ShelfGrid" AllowDrop="True">
                    <!-- Grid baggrund med subtile linjer -->
                    <Grid.Background>
                        <DrawingBrush Viewport="0,0,25,25" ViewportUnits="Absolute" TileMode="Tile">
                            <DrawingBrush.Drawing>
                                <GeometryDrawing>
                                    <GeometryDrawing.Brush>
                                        <SolidColorBrush Color="{Binding Source={StaticResource Brush.SurfaceAlt}, Path=Color}"/>
                                    </GeometryDrawing.Brush>
                                    <GeometryDrawing.Geometry>
                                        <RectangleGeometry Rect="0,0,25,25"/>
                                    </GeometryDrawing.Geometry>
                                    <GeometryDrawing.Pen>
                                        <Pen Brush="{StaticResource Brush.Border}" Thickness="0.5"/>
                                    </GeometryDrawing.Pen>
                                </GeometryDrawing>
                            </DrawingBrush.Drawing>
                        </DrawingBrush>
                    </Grid.Background>
                </Grid>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
