<UserControl x:Class="ShelfMarket.UI.Views.UserControls.Reports.ReportDailyCashView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ShelfMarket.UI.Views.UserControls.Reports" 
             xmlns:system="clr-namespace:System;assembly=System.Runtime" 
             xmlns:vm="clr-namespace:ShelfMarket.UI.ViewModels.Reports" 
             d:DataContext="{d:DesignInstance Type=vm:ReportDailyCashViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <!--<UserControl.DataContext>
        -->
    <!--In real app resolve via DI container-->
    <!--
        <vm:ReportDailyCashViewModel />
    </UserControl.DataContext>-->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid Grid.Column="1" Grid.RowSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <StackPanel>
                <TextBlock Text="Dato:" Margin="0,0,8,0"/>
                <DatePicker SelectedDate="{Binding Date}" Width="150" Margin="0,0,8,0"/>
            </StackPanel>
            <TextBlock Text="Åbningsbeholdning:" VerticalAlignment="Center" Margin="0,0,8,0" Grid.Row="2"/>
            <TextBox Text="{Binding OpeningCash, UpdateSourceTrigger=PropertyChanged, StringFormat=F2}" Width="120" Grid.Column="1" Grid.Row="2"/>
            <StackPanel Grid.Column="2">
                <Button Content="Opdater" Command="{Binding RefreshCommand}" />
            </StackPanel>
        </Grid>
        <Grid Grid.Row="2" Margin="0,5,0,5" Background="{DynamicResource Brush.Card}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.Resources>
                <Style TargetType="StackPanel">
                    <Setter Property="Margin" Value="5,10,5,10"/>
                </Style>
            </Grid.Resources>
            <StackPanel>
                <TextBlock Text="Kontantsalg (system)" FontWeight="SemiBold"/>
                <TextBlock Text="{Binding CashSalesSystem, StringFormat={}{0:C}, ConverterCulture=da-DK}" />
            </StackPanel>
            <StackPanel Grid.Column="1">
                <TextBlock Text="Forventet kontant" FontWeight="SemiBold"/>
                <TextBlock Text="{Binding ExpectedCash, StringFormat={}{0:C}, ConverterCulture=da-DK}" />
            </StackPanel>
            <StackPanel Grid.Column="2">
                <TextBlock Text="Optalt kontant" FontWeight="SemiBold"/>
                <TextBlock Text="{Binding CountedCash, StringFormat={}{0:C}, ConverterCulture=da-DK}" />
            </StackPanel>
            <StackPanel Grid.Column="3">
                <TextBlock Text="Difference" FontWeight="SemiBold"/>
                <TextBlock>
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Text" Value="{Binding Difference, StringFormat={}{0:C}, ConverterCulture=da-DK}"/>
                            <Setter Property="Foreground" Value="Black"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Difference}" Value="0">
                                    <Setter Property="Foreground" Value="DarkGreen"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Difference}">
                                    <DataTrigger.Value>
                                        <system:Decimal>0</system:Decimal>
                                    </DataTrigger.Value>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Difference}" Value="-0">
                                    <Setter Property="Foreground" Value="DarkGreen"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>
        </Grid>
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <DataGrid ItemsSource="{Binding Denominations}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      HeadersVisibility="Column"
                      Margin="0,0,12,0"
                      IsReadOnly="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Værdi" Binding="{Binding Value, StringFormat={}{0:C}, ConverterCulture=da-DK}" IsReadOnly="True" Width="*"/>
                    <DataGridTextColumn Header="Antal" Binding="{Binding Count, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                    <DataGridTextColumn Header="Beløb" Binding="{Binding Amount, StringFormat={}{0:C}, ConverterCulture=da-DK}" IsReadOnly="True" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
            <StackPanel Grid.Column="1" Margin="0,0,12,0">
                <TextBlock Text="Notat:" FontWeight="SemiBold"/>
                <TextBox Text="{Binding Note}" AcceptsReturn="True" Height="140" TextWrapping="Wrap"/>
            </StackPanel>

            <Border Grid.Column="2" BorderBrush="#CCC" BorderThickness="1" Padding="8">
                <StackPanel>
                    <TextBlock Text="Ekstra oplysninger" FontWeight="SemiBold" Margin="0,0,0,4"/>
                    <TextBlock Text="(Underskrifter printes på rapporten)"/>
                </StackPanel>
            </Border>

        </Grid>
        <TextBlock Grid.Row="4" FontSize="11"
                   Text="Kasserapport skal opbevares jf. bogføringsloven. Sørg for korrekt optælling og underskrift."
                   Margin="0,12,0,0"/>
    </Grid>
</UserControl>
