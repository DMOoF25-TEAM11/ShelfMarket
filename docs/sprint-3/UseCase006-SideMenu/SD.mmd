sequenceDiagram
    title SD for SideMenuView – before login and after login
    participant UI as SideMenuView
    participant VM as SideMenuViewModel
    participant Priv as IPrivilegeService
    participant Login as LoginView

    UI->>+VM: createSideMenuViewModel()
    VM->>+Priv: getPrivilegeLevel()
    Priv-->>-VM: returnPrivilegeLevel(level)
    VM->>VM: onPropertyChanged("CurrentLevel")
    VM->>VM: refreshMenuVisibilityAndSelection()
    VM-->>-UI: setDataContext(vm)

    alt loginInitiated
        UI->>+VM: executeMenuItemCommand("login")
        VM->>VM: onCommand("login")
        VM->>+Login: showLoginView()
        Login->>-Priv: signIn(level, password)
        alt signInSuccess
            Priv-->>VM: currentLevelChanged(newLevel)
            VM->>VM: onPropertyChanged("CurrentLevel")
            VM->>VM: refreshMenuVisibilityAndSelection()
        else signInFailed
            Priv-->>VM: signInFailed()
            VM->>VM: onSignInFailed()
        end
        VM->>-UI: updateDataContext(vm)
    end

    alt logoutInitiated
        UI->>+VM: executeMenuItemCommand("logout")
        VM->>+Priv: signOut()
        Priv-->>-VM: currentLevelChanged("guest")
        VM->>VM: onPropertyChanged("CurrentLevel")
        VM->>VM: refreshMenuVisibilityAndSelection()
        VM->>-UI: updateDataContext(vm)
    end
