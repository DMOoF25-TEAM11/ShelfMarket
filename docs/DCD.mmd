classDiagram
    namespace ShelfMarket.Domain.Entities {
        class ShelfType {
            +Guid Id
            +string Name
            +string Description
        }

        class Shelf {
            +Guid Id
            +int Number
            +Guid ShelfTypeId
            +uint LocationX
            +uint LocationY
            +bool OrientationHorizontal
        }

        class ShelfRentContract {
            +Guid Id
            +Guid ShelfTenantId
            +uint ContractNumber
            +date StartDate
            +date EndDate
            +date CancelledAt
        }

        class ShelfRentContractLine {
            +Guid Id
            +Guid ShelfRentContractId
            +Guid ShelfId
            +uint LineNumber
            +decimal PricePerMonth
            +decimal PricePerMonthSpecial
        }
    }

    namespace ShelfMarket.Application.Interfaces {
        class IRepository~TEntity~ {
            <<interface>>
            +GetByIdAsync(Guid id) Task~TEntity~
            +GetAllAsync() Task~List__TEntity~
            +AddAsync(TEntity entity) Task
            +UpdateAsync(TEntity entity) Task
            +DeleteAsync(Guid id) Task
        }
        class IShelfTypeRepository {
            <<interface>>
            +GetByIdAsync(Guid id) Task~ShelfType~
            +GetAllAsync() Task~List__ShelfType~
            +AddAsync(ShelfType shelfType) Task
            +UpdateAsync(ShelfType shelfType) Task
            +DeleteAsync(Guid id) Task
        }

        class IShelfRepository {
            <<interface>>
            +GetByIdAsync(Guid id) Task~Shelf~
            +GetAllAsync() Task~List__Shelf~
            +AddAsync(Shelf shelf) Task
            +UpdateAsync(Shelf shelf) Task
            +DeleteAsync(Guid id) Task
        }

        class IShelfRentContractRepository {
            <<interface>>
            +GetByIdAsync(Guid id) Task~ShelfRentContract~
            +GetAllAsync() Task~List__ShelfRentContract~
            +AddAsync(ShelfRentContract shelfRentContract) Task
            +UpdateAsync(ShelfRentContract shelfRentContract) Task
            +DeleteAsync(Guid id) Task
        }

        class IShelfRentContractLineRepository {
            <<interface>>
            +GetByIdAsync(Guid id) Task~ShelfRentContractLine~
            +GetAllAsync() Task~List__ShelfRentContractLine~
            +AddAsync(ShelfRentContractLine shelfRentContractLine) Task
            +UpdateAsync(ShelfRentContractLine shelfRentContractLine) Task
            +DeleteAsync(Guid id) Task
        }
    }

    namespace ShelfMarket.Infrastructure.Repositories {
        class Repository~TEntity~ {
            #ShelfMarketDbContext _context
            #DbSet~TEntity~ _dbSet
            +Repository() void
            +SaveChangesAsync(ShelfMarketDbContext context) Task
        }

        class ShelfRepository {
            +ShelfRepository(ShelfMarketDbContext context)
            +GetByIdAsync(Guid id) Task~Shelf~ 
            +GetAllAsync() Task~List__Shelf~ 
            +AddAsync(Shelf shelf) Task
            +UpdateAsync(Shelf shelf) Task
            +DeleteAsync(Guid id) Task
        }

        class ShelfTypeRepository {
            +ShelfTypeRepository(ShelfMarketDbContext context)
            +GetByIdAsync(Guid id) Task~ShelfType~
            +GetAllAsync() Task~List__ShelfType~
            +AddAsync(ShelfType shelfType) Task
            +UpdateAsync(ShelfType shelfType) Task
            +DeleteAsync(Guid id) Task
        }
    }

    %% Associations
    Shelf --* ShelfRepository : manages
    ShelfType --* ShelfTypeRepository : manages
    ShelfRentContract --* ShelfRentContractRepository : manages
    ShelfRentContractLine --* IShelfRentContractLineRepository : manages

    %% Composition
    Shelf --* ShelfType : has a
    ShelfRentContract *-- ShelfRentContractLine : "has"
    
    Repository o-- ShelfMarketDbContext : uses


    %% Inheritance and Implementation
    ShelfRepository --|> IShelfRepository : implements
    ShelfTypeRepository --|> IShelfTypeRepository : implements
    ShelfRentContractRepository --|> IShelfRentContractRepository : implements
    Repository --|> IRepository : implements

    IShelfRepository --|> IRepository : implements
    IShelfTypeRepository --|> IRepository : implements
    IShelfRentContractRepository --|> IRepository : implements

    ShelfRepository ..|> Repository : inheritance
    ShelfTypeRepository ..|> Repository : inheritance
    ShelfRentContractRepository ..|> Repository : inheritance

